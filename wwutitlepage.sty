\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{wwutitlepage}[2020/07/24 Titlepage following the WWU corporate design]

\RequirePackage{geometry}
\RequirePackage[some]{background}
\RequirePackage{tikz}
\RequirePackage{xcolor}
\RequirePackage{graphicx}
\RequirePackage{calc}

% Pantone 7462
\definecolor{wwutitlepagecolor}{cmyk}{1.0,0.35,0.0,0.40} 

\newcommand{\wwutitlepage}[4][wwutitlepagecolor]{%
\backgroundsetup{
  scale=1,
  angle=0,
  opacity=1,
  contents={
    \begin{tikzpicture}[remember picture, overlay]
      \node[inner sep=0pt, anchor=north west]
        (wwulogo) at (-0.5\paperwidth + 14mm, 0.5\paperheight - 14mm)
        {\includegraphics[width=75mm]{wwucd/logo.pdf}};
      \node[inner sep=0pt, anchor=south west]
        (wwuclaim) at (-0.5\paperwidth + 14mm, -0.5\paperheight + 14mm)
        {\includegraphics[width=37.5mm]{wwucd/claim.pdf}};
      \node[inner sep=0pt, anchor=south east]
        (logo) at (0.5\paperwidth - 14mm, -0.5\paperheight + 14mm)
        {\includegraphics[width=50mm, height=25mm, keepaspectratio]{#2}};
      \path
        [fill=#1]
        % Roof Top Bar
        (0.5\paperwidth - 4.5mm,
        0.5\paperheight - 52mm)
        rectangle
        (0.5\paperwidth,
        0.5\paperheight - 52mm - 14mm)
        % Roof Middle Bar
        (0.5\paperwidth - 12.5mm,
        0.5\paperheight - 52mm - 14mm - 6mm)
        rectangle
        (0.5\paperwidth,
        0.5\paperheight - 52mm - 14mm - 6mm - 7mm)
        % Roof Bottom Bar
        (0.5\paperwidth - 22mm,
        0.5\paperheight - 52mm - 14mm - 6mm - 7mm - 26mm)
        rectangle
        (0.5\paperwidth,
        0.5\paperheight - 52mm - 14mm - 6mm - 7mm - 26mm - 14mm)
        %
        %
        % Building Top Bar
        (-0.5\paperwidth,
        -0.5\paperheight + 52mm + 14mm + 52mm + 7mm + 26mm + 14mm)
        rectangle
        (0.5\paperwidth - 22mm - 23.5mm,
        -0.5\paperheight + 52mm + 14mm + 52mm + 7mm + 26mm)
        % Building Middle Bar
        (-0.5\paperwidth,
        -0.5\paperheight + 52mm + 14mm + 52mm + 7mm)
        rectangle
        (0.5\paperwidth,
        -0.5\paperheight + 52mm + 14mm + 52mm)
        % Building Bottom Bar
        (-0.5\paperwidth,
        -0.5\paperheight + 52mm + 14mm)
        rectangle
        (0.5\paperwidth,
        -0.5\paperheight + 52mm);  
    \end{tikzpicture}
  }
}
\begin{titlepage}
\BgThispage
\color{#1} \fontsize{26}{31} \selectfont
\newlength{\indentarrow}
\settowidth{\indentarrow}{> }
\newgeometry{left=(14mm + \indentarrow), top=66mm, right=(22mm + 23.5mm)}
\normalbaselines \raggedright \noindent
\hspace*{-\indentarrow}> {#3} \\[26pt]
\color{black} \fontsize{19.5}{23} \selectfont {#4}
\restoregeometry
\end{titlepage}
}

